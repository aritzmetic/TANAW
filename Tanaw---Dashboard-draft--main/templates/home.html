<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>TANAW: Home</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Candu&family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" referrerpolicy="no-referrer" rel="stylesheet"/>
<style>
        /* DepEd Solid Color Palette */
        :root {
            --deped-blue: #00308F; /* Deep Blue */
            --deped-yellow: #FFDA63; /* Golden Yellow */
            --deped-light-blue: #ADD8E6; /* Light Blue */
            --deped-white: #FFFFFF;
            --deped-gray: #D3D3D3; /* Lighter gray for borders/backgrounds */
            --deped-light-gray: #f0f2f5; /* Even lighter for backgrounds */
            --text-dark: #333;
            --text-light: #777;
            --box-shadow-sm: 0 4px 8px rgba(0, 0, 0, 0.08);
            --box-shadow-md: 0 8px 16px rgba(0, 0, 0, 0.1);
            --transition-default: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --border-radius-md: 12px;
            --border-radius-sm: 6px;
            --accent-color: #FFA000; /* Example accent color */
            --red-color: #DC3545;
            --black-color: #000000;
            --secondary-blue: #4361EE;
            --gradient-blue: linear-gradient(135deg, var(--deped-blue) 0%, var(--secondary-blue) 100%);
            --gradient-yellow: linear-gradient(135deg, var(--deped-yellow) 0%, #FFEA88 100%);
            --gradient-light-blue: linear-gradient(135deg, #cce5ff 0%, #99ccff 50%, #66b2ff 100%);
             --success-color: #28a745; /* Green */
            --warning-color: #ffc107; /* Yellow */
            --danger-color: #dc3545; /* Red */
            --info-color: #17a2b8; /* Cyan */
        }

        /* DepEd Fonts */
        body {
            font-family: 'Open Sans', sans-serif;
            background: var(--deped-light-gray); 
            color: var(--text-dark);
            line-height: 1.7;
            padding: 20px; 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            animation: fadeIn 0.6s ease-out;
        }

        h1, h2, h3, h4 {
            font-family: 'Montserrat', sans-serif;
            color: var(--deped-blue);
            margin-bottom: 0.6em;
            letter-spacing: -0.7px;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05); 
        }

        h1 { font-size: 2.8rem; animation: fadeInDown 0.9s ease-out; margin-bottom: 0.1em; color: var(--deped-white); }
        h2 { font-size: 2.2rem; color: var(--deped-blue); margin-bottom: 1em; text-align: center; }
        h3 { font-size: 1.8rem; color: var(--deped-blue); margin-bottom: 0.8em; border-bottom: 4px solid var(--deped-yellow); padding-bottom: 0.5em; }
        h4 { font-size: 1.3rem; color: var(--secondary-blue); margin-top: 0; margin-bottom: 1em; }

        /* Header */
        header {
            background: var(--gradient-blue); color: var(--deped-blue); padding: 20px;
            border-radius: var(--border-radius-md); margin-bottom: 35px; box-shadow: var(--box-shadow-md);
            display: flex; align-items: center; justify-content: space-between;
            position: relative; overflow: hidden; z-index: 100; border-bottom: 4px solid var(--deped-yellow);
        }
        header::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background-color: rgba(255, 218, 99, 0.15); border-radius: 50%;
            transform: translate(-10%, -10%) rotate(-30deg); z-index: -1; animation: pulse 2s infinite alternate;
        }
        @keyframes pulse { 0% { opacity: 0.8; transform: translate(-10%, -10%) rotate(-30deg) scale(1); } 100% { opacity: 1; transform: translate(-10%, -10%) rotate(-30deg) scale(1.05); } }
        header .logo-area { display: flex; align-items: center; }
        header .logo-area img { height: 100px; vertical-align: middle; margin-right: 20px; animation: fadeIn 1.1s ease-out, slideInLeft 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        header .logo-area h1 { font-size: 1.4rem; font-weight: 800; margin: 0; line-height: 1.2; animation: fadeIn 1.1s ease-out, slideInRight 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .header-right { display: flex; align-items: center; }
        nav { background-color: rgba(255, 255, 255, 0.1); border-radius: var(--border-radius-md); padding: 0; margin: 0; animation: none; transform: none; opacity: 1; margin-right: 15px; }
        nav ul { list-style: none; padding: 10px 15px; margin: 0; display: flex; gap: 15px; }
        nav ul li a {
            display: inline-flex; padding: 10px 20px; text-decoration: none; color: var(--deped-white);
            background-color: transparent; border: 2px solid var(--deped-yellow); border-radius: var(--border-radius-sm);
            font-size: 1rem; font-weight: 700; transition: var(--transition-default);
            align-items: center; white-space: nowrap; box-shadow: var(--box-shadow-sm);
        }
        nav ul li a:hover { background-color: var(--deped-yellow); color: var(--deped-blue); border-color: var(--accent-color); transform: translateY(-3px); box-shadow: 0 10px 15px rgba(0, 0, 0, 0.25); }
        nav ul li a:focus { outline: none; box-shadow: 0 0 0 4px rgba(173, 216, 230, 0.7); }
        nav ul li a i { margin-right: 10px; font-size: 1.1rem; }
        .hamburger-menu { display: none; flex-direction: column; justify-content: center; align-items: center; width: 35px; height: 35px; cursor: pointer; gap: 6px; z-index: 103; }
        .hamburger-menu .bar { width: 28px; height: 4px; background-color: var(--deped-white); border-radius: 5px; transition: var(--transition-default); }
        .mobile-nav-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 101; backdrop-filter: blur(5px); }
        .mobile-nav { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--gradient-blue); width: 350px; border-radius: var(--border-radius-md); box-shadow: var(--box-shadow-md); z-index: 102; margin-top: 0; animation: slideInDown 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .mobile-nav.open { display: block; }
        .mobile-nav .close-btn { position: absolute; top: 15px; right: 20px; color: var(--deped-yellow); font-size: 1.6rem; cursor: pointer; border: none; background: none; transition: var(--transition-default); }
        .mobile-nav .close-btn:hover { color: var(--accent-color); }
        .mobile-nav ul { list-style: none; padding: 30px; margin: 0; display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .mobile-nav ul li a { display: block; text-decoration: none; color: var(--deped-yellow); padding: 15px 25px; border-radius: var(--border-radius-sm); transition: var(--transition-default); text-align: center; width: 100%; font-size: 1.1rem; border: 2px solid var(--deped-yellow); }
        .mobile-nav ul li a:hover { background-color: rgba(255, 218, 99, 0.2); color: var(--deped-blue); border-color: var(--accent-color); }
        .account-popup { display: none; position: absolute; top: 60px; right: 20px; background-color: var(--deped-white); border: 1px solid var(--deped-gray); border-radius: var(--border-radius-sm); box-shadow: var(--box-shadow-md); padding: 20px; z-index: 101; width: 180px; text-align: center; animation: fadeInUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .account-popup h4 { color: var(--text-dark); font-size: 1.2rem; margin-top: 0; margin-bottom: 12px; }
        .account-popup button { display: block; width: 100%; padding: 10px 15px; margin-bottom: 10px; border: none; border-radius: var(--border-radius-sm); background-color: var(--deped-light-blue); color: var(--deped-blue); font-size: 1rem; cursor: pointer; transition: var(--transition-default); box-shadow: var(--box-shadow-sm); }
        .account-popup button:last-child { margin-bottom: 0; }
        .account-popup button:hover { background-color: var(--secondary-blue); color: var(--deped-white); transform: translateY(-2px); box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2); }


        /* Welcome Section */
        #welcome-section { background: var(--gradient-light-blue); color: var(--deped-blue); padding: 40px 25px; border-radius: var(--border-radius-md); margin-bottom: 30px; box-shadow: var(--box-shadow-md); position: relative; overflow: hidden; display: flex; flex-direction: column; align-items: center; text-align: center; border-top: 5px solid var(--deped-blue); border-bottom: 5px solid var(--deped-blue); }
        #welcome-section::before, #welcome-section::after { content: ''; position: absolute; width: 70px; height: 70px; background-color: rgba(0, 48, 143, 0.1); border-radius: 50%; }
        #welcome-section::before { top: 10px; left: 10px; animation: bubble 8s infinite alternate; }
        #welcome-section::after { bottom: 10px; right: 10px; animation: bubble 10s infinite alternate; }
        @keyframes bubble { 0% { transform: translate(0, 0) scale(1); opacity: 0.6; } 100% { transform: translate(40px, 40px) scale(1.2); opacity: 0.2; } }
        #welcome-section h2 { color: var(--deped-blue); margin-top: 0; margin-bottom: 15px; font-size: 2.4rem; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); animation: pulseTitle 1.5s infinite alternate; }
        @keyframes pulseTitle { 0% { transform: scale(1); } 100% { transform: scale(1.02); } }
        #welcome-section p { font-size: 1.05rem; max-width: 800px; margin-bottom: 10px; color: var(--text-dark); text-shadow: 0.5px 0.5px 1px rgba(0, 0, 0, 0.05); }
        .welcome-icons { position: absolute; font-size: 2.2rem; color: rgba(0, 48, 143, 0.18); animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-8px); } 100% { transform: translateY(0px); } }
        .welcome-icons.top-left { top: 15px; left: 15px; }
        .welcome-icons.bottom-right { bottom: 15px; right: 15px; opacity: 0.7; animation-delay: 1.5s; }

        /* Dashboard Main & Widgets */
        #dashboard-main { display: flex; flex-direction: column; gap: 25px; margin-bottom: 25px; }
        
        /* New Grid for Profile/Glance and Map */
        #main-dashboard-layout {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two equal columns */
            /* grid-template-rows: auto auto;  Let rows size based on content */
            gap: 25px;
            margin-bottom: 25px;
        }
        #left-column-content {
            display: flex;
            flex-direction: column;
            gap: 25px; /* Space between Profile and DepEd Glance */
        }


        #dashboard-widgets-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .dashboard-widget { background-color: var(--deped-white); border-radius: var(--border-radius-md); box-shadow: var(--box-shadow-md); padding: 25px; transition: var(--transition-default); transform: translateY(0); flex-grow: 1; box-sizing: border-box; border-left: 6px solid var(--deped-white); display: flex; flex-direction: column; }
        .dashboard-widget:hover { transform: translateY(-5px); box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15); }
        .dashboard-widget h4 { color: var(--deped-blue); margin-top: 0; margin-bottom: 18px; font-size: 1.4rem; font-weight: 700; border-bottom: 2px solid var(--deped-light-blue); padding-bottom: 0.6em; }
        .dashboard-widget h4 i { margin-right: 10px; }

        #user-profile { border-left-color: var(--deped-blue); }
        #user-profile .profile-info-item { margin-bottom: 8px; color: var(--text-dark); font-size: 0.9rem; display: flex; align-items: center; gap: 10px; padding-bottom: 4px; border-bottom: 1px dashed rgba(0, 48, 143, 0.1); }
        #user-profile .profile-info-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        #user-profile .profile-info-item i { color: var(--secondary-blue); font-size: 1.1rem; width: 20px; text-align: center; }
        #user-profile .profile-info-item strong { min-width: 100px; display: inline-block; color: var(--deped-blue); font-weight: 600; }
        #user-profile button { margin-top: 15px; width: auto; padding: 10px 15px; display: inline-block; margin-right: 10px; background: var(--gradient-blue); color: var(--deped-white); border: none; border-radius: var(--border-radius-sm); cursor: pointer; font-size: 0.9rem; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; box-shadow: var(--box-shadow-sm); }
        #user-profile button:last-child { margin-right: 0; }
        #user-profile button:hover { transform: scale(1.03); box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2); }

        #realtime-clock-widget { display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--deped-white); color: var(--deped-blue); border-left-color: var(--info-color); border-radius: var(--border-radius-md); }
        #realtime-clock { font-family: 'Montserrat', sans-serif; font-size: 2.5rem; text-align: center; margin-bottom: 5px; text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2); animation: glow 1s infinite alternate; font-weight: 800; }
        @keyframes glow { 0% { text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2); color: var(--deped-blue);} 100% { text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4); color: var(--secondary-blue);} }
        #realtime-date { font-size: 1rem; text-align: center; opacity: 0.9; color: var(--text-dark); font-weight: 600; }

        #calendar-widget { text-align: center; border-radius: var(--border-radius-md); background-color: var(--deped-white); color: var(--deped-blue); padding-top: 25px; border-left-color: var(--success-color); }
        #calendar-widget h4 { margin-bottom: 15px; border-bottom: none; color: var(--deped-blue); }
        #calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; width: 100%; max-width: 280px; margin: 0 auto; border: 1px solid var(--deped-gray); border-radius: var(--border-radius-sm); overflow: hidden; }
        .calendar-day { padding: 6px; text-align: center; background-color: var(--deped-white); color: var(--text-dark); border-radius: 0; transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out; font-size: 0.8rem; user-select: none; cursor: pointer; }
        .calendar-day.header { font-weight: bold; color: var(--deped-white); background-color: var(--deped-blue); }
        .calendar-day.current-day { background-color: var(--deped-yellow); color: var(--deped-blue); font-weight: bold; position: relative; overflow: hidden; animation: pulseDay 1.5s infinite alternate; }
        @keyframes pulseDay { 0% { transform: scale(1); opacity: 1;} 100% { transform: scale(1.05); opacity: 0.9; } }
        .calendar-day:hover:not(.header) { background-color: var(--deped-light-blue); transform: scale(1.05); }
        .calendar-day:active:not(.header) { transform: scale(0.95); }

        #weather-widget { display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--deped-white); color: var(--deped-blue); border-left-color: var(--warning-color); border-radius: var(--border-radius-md); font-size: 1rem; padding: 25px; }
        #weather-widget p { margin-bottom: 8px; font-size: 1rem; }
        #weather-widget p:last-of-type { margin-bottom: 10px; }
        #weather-icon { font-size: 2rem; margin-top: 5px; color: var(--accent-color); }

        #visual-about-deped { border-left-color: var(--secondary-blue); }
        #visual-about-deped .glance-content { display: flex; align-items: center; gap: 20px; } 
        #visual-about-deped img { width: 100px; height: 100px; object-fit: contain; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); flex-shrink: 0; }
        #visual-about-deped p { font-size: 0.9rem; color: var(--text-dark); flex-grow: 1; }

        /* Dash Heatmap Placeholder Styles */
        #dashboard-heatmap-section { 
            grid-column: 2 / 3; /* Takes the second column */
            grid-row: 1 / 3;    /* Spans two rows to align with Profile + DepEd Glance */
            display: flex;      /* Added to make iframe container fill height */
            flex-direction: column;
        }
        #heatmap-widget { /* This ID is not used, styling dashboard-heatmap-section directly */
            border-left-color: var(--deped-blue); 
            height: 100%; 
        }
        #heatmap-iframe-container {
            position: relative;
            width: 100%;
            /* padding-bottom: 100%;  Let flex-grow handle height relative to parent */
            height: 0; /* Initial height for padding-bottom trick if used, or let flex handle */
            overflow: hidden;
            background-color: #f0f0f0; 
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--deped-gray);
            flex-grow: 1; /* This makes it take available space in the flex column */
        }
        #heatmap-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Enhanced News Articles Section */
        #news-articles-section { /* New ID for the news section if it's separate */
            /* If it's part of the main flow, style #news-articles directly */
        }
        #news-articles { 
            padding: 25px; 
            border-radius: var(--border-radius-md); 
            background-color: var(--deped-white); 
            box-shadow: var(--box-shadow-md);
            border-left: 6px solid var(--info-color); 
            display: flex; 
            flex-direction: column;
            margin-top: 25px; /* Add margin if it's below other elements */
        }
        #news-articles h3 { 
            color: var(--deped-blue);
            border-bottom: 3px solid var(--deped-yellow); 
            padding-bottom: 0.7em;
            margin-bottom: 25px; 
            font-size: 1.9rem; 
            text-align: left;
            display: flex;
            align-items: center;
            font-weight: 800; 
        }
         #news-articles h3 i {
            margin-right: 15px; 
            color: var(--secondary-blue); 
            font-size: 1.8rem; 
        }

        .news-feed-container { 
            max-height: 550px; /* Adjusted height */
            overflow-y: auto;
            padding-right: 10px; 
            flex-grow: 1; 
        }
        .news-item-live {
            display: flex; 
            gap: 20px; 
            padding: 20px; 
            border-bottom: 1px solid var(--deped-light-blue); 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            background-color: var(--deped-white);
            border-radius: var(--border-radius-sm);
            margin-bottom: 20px; 
            box-shadow: var(--box-shadow-sm);
        }
        .news-item-live:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .news-item-live:hover {
            transform: translateY(-5px) scale(1.01); 
            box-shadow: var(--box-shadow-md); 
            background-color: #fdfdfd; 
        }
        .news-item-live img.news-image-placeholder {
            width: 150px; 
            height: 110px; 
            object-fit: cover; 
            border-radius: var(--border-radius-sm);
            background-color: var(--deped-gray); 
            flex-shrink: 0; 
            border: 2px solid var(--deped-light-blue); 
            transition: transform 0.3s ease;
        }
        .news-item-live:hover img.news-image-placeholder {
            transform: scale(1.05); 
        }
        .news-content-live {
            display: flex;
            flex-direction: column;
            flex-grow: 1; 
        }
        .news-title-live a {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700; 
            color: var(--deped-blue);
            text-decoration: none;
            font-size: 1.2rem; 
            line-height: 1.4; 
            display: block; 
            margin-bottom: 8px; 
            transition: color 0.2s ease;
        }
        .news-title-live a:hover {
            text-decoration: underline;
            color: var(--secondary-blue);
        }
        .news-source-live {
            font-size: 0.85rem; 
            color: var(--text-light);
            display: flex; 
            align-items: center;
            margin-top: 4px;
            margin-bottom: 10px; 
            font-family: 'Open Sans', sans-serif;
        }
        .news-source-live i {
            margin-right: 8px; 
            color: var(--accent-color); 
        }
        .news-description-live { 
            font-size: 0.95rem; 
            color: var(--text-dark);
            margin-top: 8px;
            line-height: 1.6;
            display: -webkit-box; 
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Open Sans', sans-serif;
        }
        .news-loading-text, .news-error-text { 
            font-size: 1rem; color: var(--text-light); text-align: center; padding: 20px; 
        }


        /* Footer (as per user request, no changes from previous version) */
        footer { background: var(--gradient-blue); color: var(--deped-light-blue); padding: 40px 20px; border-radius: var(--border-radius-md); margin-top: 40px; box-shadow: var(--box-shadow-md); transition: var(--transition-default); }
        footer div { max-width: 1200px; margin: 0 auto; text-align: center; }
        footer h4 { font-size: 1.6rem; font-weight: 800; margin-bottom: 15px; color: var(--deped-yellow); text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3); }
        footer p { font-size: 1.1rem; margin-bottom: 20px; color: var(--deped-white); opacity: 0.9; }
        footer hr { border: none; border-top: 1px solid rgba(255, 255, 255, 0.2); margin: 25px auto; width: 80%; }
        footer a { text-decoration: none; color: var(--deped-light-blue); transition: color 0.3s ease-in-out; font-size: 1rem; margin: 0 15px; }
        footer a:hover { color: var(--deped-yellow); }
        footer p#copyright { font-size: 0.9rem; margin-top: 25px; opacity: 0.7; }

        /* Responsive Design */
        @media (max-width: 1024px) { 
             #main-dashboard-layout { /* Stack Profile/Glance and Map */
                 grid-template-columns: 1fr; 
             }
             #dashboard-heatmap-section { /* Ensure map takes its own row when stacked */
                grid-column: 1 / -1; /* Full width */
                grid-row: auto; /* Let it flow naturally */
                min-height: 450px; /* Give it a decent minimum height on tablets */
             }
             #dashboard-widgets-grid { grid-template-columns: 1fr; } 
             #news-articles { margin-top: 25px; } 
             #visual-about-deped .glance-content { flex-direction: column; text-align: center;}
             #visual-about-deped img { width: 120px; height: 120px; margin-bottom: 15px;}
             #visual-about-deped p { max-width: 100%;}
             .news-item-live { flex-direction: column; align-items: flex-start; text-align: left; } 
             .news-item-live img.news-image-placeholder { margin-bottom: 15px; width: 100%; height: 180px; } 
             .news-content-live { align-items: flex-start; }
        }
        @media (max-width: 768px) {
            body { padding: 15px; }
            header { padding: 15px; margin-bottom: 20px; }
            header .logo-area img { height: 80px; margin-right: 10px; }
            header .logo-area h1 { font-size: 0.9rem; }
            nav { display: none; }
            .header-right { justify-content: flex-end; width: auto; }
            .hamburger-menu { display: flex; width: 30px; height: 30px; gap: 5px; }
            .hamburger-menu .bar { width: 24px; height: 3px; }
            .account-popup { top: 55px; right: 10px; width: 150px; padding: 10px; }
            .account-popup h4 { font-size: 1rem; margin-bottom: 8px; }
            .account-popup button { font-size: 0.8rem; padding: 6px 10px; margin-bottom: 6px; }
            #welcome-section { padding: 30px 15px; margin-bottom: 20px; }
            #welcome-section h2 { font-size: 1.8rem; }
            #welcome-section p { font-size: 0.9rem; }
            .welcome-icons { font-size: 1.8rem; }
            .welcome-icons.top-left { top: 10px; left: 10px; }
            .welcome-icons.bottom-right { bottom: 10px; right: 10px; }
            .dashboard-widget { padding: 15px; }
            .dashboard-widget h4 { font-size: 1.2rem; margin-bottom: 10px; padding-bottom: 0.4em; }
            #user-profile .profile-info-item { font-size: 0.8rem; gap: 8px; }
            #user-profile .profile-info-item i { font-size: 1rem; min-width: 16px; }
            #user-profile .profile-info-item strong { min-width: 80px; }
            #user-profile button { font-size: 0.8rem; padding: 6px 10px; margin-top: 10px; }
            #realtime-clock { font-size: 2rem; }
            #realtime-date { font-size: 0.9rem; }
            #calendar-widget h4 { font-size: 1.2rem; margin-bottom: 10px; }
            .calendar-day { padding: 4px; font-size: 0.7rem; }
            #calendar { max-width: 240px; }
            #weather-widget p { font-size: 0.9rem; }
            #weather-icon { font-size: 1.5rem; }
            #news-articles { padding: 20px; margin-top: 25px; }
            #news-articles h3 { font-size: 1.6rem; padding-bottom: 0.5em; margin-bottom: 1em; }
            #news-articles h3 i { font-size: 1.5rem; margin-right: 10px; }
            .news-item-live img.news-image-placeholder { width: 100%; height: 150px; } 
            .news-title-live a { font-size: 1.05rem; }
            .news-description-live { font-size: 0.9rem; -webkit-line-clamp: 3; }


            footer { padding: 25px 10px; margin-top: 30px; }
            footer h4 { font-size: 1.2rem; margin-bottom: 10px; }
            footer p { font-size: 0.9rem; margin-bottom: 15px; }
            footer hr { margin: 20px auto; }
            footer a { font-size: 0.8rem; margin: 0 8px; }
            footer p#copyright { font-size: 0.8rem; margin-top: 20px; }
        }

        /* Animations */
         @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
         @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
         @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
         @keyframes slideInLeft { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
         @keyframes slideInRight { from { transform: translateX(20px); opacity: 0; } to { opacity: 1; transform: translateX(0); opacity: 1; } }
</style>
</head>
<body>
<header>
    <div class="logo-area">
        <img alt="DepEd Logo" src="/static/logo (1).png"/>
        <h1>TRACKING & ANALYTICS FOR NATIONWIDE ACADEMIC WATCH</h1>
    </div>
    <div class="header-right">
        <nav>
            <ul>
                <li><a href="/home"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="/dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="/report"><i class="fas fa-file-alt"></i> Reports</a></li>
                <li><a href="#" id="accountBtn"><i class="fas fa-user-circle"></i></a></li>
            </ul>
        </nav>
        <div class="hamburger-menu" id="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </div>
    <div class="mobile-nav-overlay" id="navOverlay"></div>
    <div class="mobile-nav" id="mobileNav">
        <button class="close-btn" id="closeNav"><i class="fas fa-times"></i></button>
        <ul>
            <li><a href="/upload"><i class="fas fa-cogs"></i> Admin</a></li>
            <li><a href="/help"><i class="fas fa-question-circle"></i> Help</a></li>
            <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
    </div>
</header>

<div class="account-popup" id="accountPopup">
    <h4>Account</h4>
    <button onclick="window.location.href='/upload'"><i class="fas fa-cogs"></i> Admin</button>
    <button onclick="window.location.href='/help'"><i class="fas fa-question-circle"></i> Help</button>
    <button onclick="window.location.href='/logout'"><i class="fas fa-sign-out-alt"></i> Logout</button>
</div>

<main>
    <section id="welcome-section">
        <i class="fas fa-graduation-cap welcome-icons top-left"></i>
        <h2 id="welcome-message">Welcome back, <span id="user-fullname">User</span>!</h2>
        <p>"Tanaw" provides a dynamic and insightful view of nationwide academic enrollment data, empowering educators and administrators to make informed decisions.</p>
        <i class="fas fa-chart-bar welcome-icons bottom-right"></i>
    </section>

    <section id="dashboard-main">
        <div id="main-dashboard-layout">
            <div id="left-column-content">
                <div class="dashboard-widget" id="user-profile">
                    <h4><i class="fas fa-user-circle"></i> Your Profile</h4>
                    <div class="profile-info-item"><i class="fas fa-id-card-alt"></i> <strong>Name:</strong> <span id="profile-name"></span></div>
                    <div class="profile-info-item"><i class="fas fa-user-tag"></i> <strong>Role:</strong> <span id="profile-role">Administrator</span></div>
                    <div class="profile-info-item"><i class="fas fa-envelope"></i> <strong>Email:</strong> <span id="profile-email"></span></div>
                    <div class="profile-info-item"><i class="fas fa-building"></i> <strong>Department:</strong> <span id="profile-department">Data Management Unit</span></div>
                    <div class="profile-info-item"><i class="fas fa-user-check"></i> <strong>Status:</strong> <span id="profile-status">Active</span></div>
                    <button onclick="window.location.href='/logout'"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
                <div class="dashboard-widget" id="visual-about-deped">
                    <h4><i class="fas fa-school"></i> DepEd at a Glance</h4>
                    <div class="glance-content"> 
                        <img alt="DepEd Central Office" src="/static/deped_building.png" />
                        <p>The Department of Education (DepEd) formulates, implements, and coordinates policies, plans, programs, and projects in the areas of formal and non-formal basic education.</p>
                    </div>
                </div>
            </div>

            <section id="dashboard-heatmap-section" class="dashboard-widget"> 
                <h4><i class="fas fa-fire"></i> Regional Enrollment Heatmap (Active SY)</h4>
                <div id="heatmap-iframe-container">
                    <iframe 
                        id="heatmap-iframe"
                        src="/dashheatmap/" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
                <small style="font-size: 0.7rem; color: var(--text-light); margin-top: 10px; text-align: center; display: block;">
                    This map visualizes total enrollment per region from the active dataset. Select a school year in the map to update.
                </small>
            </section>
        </div>

        <div id="dashboard-widgets-grid">
            <div class="dashboard-widget" id="realtime-clock-widget">
                <h4><i class="fas fa-clock"></i> Realtime Clock</h4>
                <div id="realtime-clock"></div>
                <div id="realtime-date"></div>
            </div>
            <div class="dashboard-widget" id="weather-widget">
                <h4><i class="fas fa-cloud-sun"></i> Weather in Manila</h4>
                <p><i class="fas fa-thermometer-half"></i> Temperature: <span id="weather-temp">--</span>°C</p>
                <p><i class="fas fa-tint"></i> Humidity: <span id="weather-humidity">--</span>%</p>
                <p><i class="fas fa-wind"></i> Wind: <span id="weather-wind">--</span> km/h</p>
                <div id="weather-icon" style="font-size: 1.5rem;"></div>
                <small style="font-size: 0.7rem; color: var(--text-light); margin-top: 10px;">(Simulated data - integrate API for live weather)</small>
            </div>
            <div class="dashboard-widget" id="calendar-widget">
                <h4><i class="fas fa-calendar-alt"></i> Calendar</h4>
                <div id="calendar"></div>
            </div>
        </div>
    </section>

    <section id="news-articles" class="dashboard-widget">
        <h3><i class="fas fa-bullhorn"></i> Latest Education News & Updates</h3>
        <div id="live-news-feed" class="news-feed-container">
            <p class="news-loading-text"><i class="fas fa-spinner fa-spin"></i> Loading latest news...</p>
            </div>
    </section>

</main>

<footer>
    <div>
        <h4><i class="fas fa-university" style="margin-right: 10px;"></i> Department of Education</h4>
        <p>Empowering the Nation Through Quality Education.</p>
        <hr/>
        <div>
            <a href="/home">Home</a> <a href="/dashboard">Dashboard</a> <a href="/report">Reports</a>
            <a href="/help">Help</a> <a href="/upload">Admin</a>
        </div>
        <p id="copyright">© 2025 DepEd Enrollment Dashboard. All rights reserved.</p>
    </div>
</footer>

<script>
    // Function to get data from localStorage
    function getLocalStorage(key) { return localStorage.getItem(key); }

    // Update copyright year
    function updateCopyrightYear() {
        const year = new Date().getFullYear();
        document.getElementById('copyright').textContent = `© ${year} DepEd Enrollment Dashboard. All rights reserved.`;
    }
    updateCopyrightYear();

    // Update realtime clock and date
    function updateRealtimeClock() {
        const now = new Date();
        const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
        const formattedDate = now.toLocaleDateString(undefined, dateOptions);
        const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
        const formattedTime = now.toLocaleTimeString(undefined, timeOptions);
        document.getElementById('realtime-clock').textContent = formattedTime;
        document.getElementById('realtime-date').textContent = formattedDate;
    }
    setInterval(updateRealtimeClock, 1000);
    updateRealtimeClock();

    // Render calendar
     function renderCalendar() {
        const now = new Date(); const currentMonth = now.getMonth(); const currentYear = now.getFullYear();
        const todayDate = now.getDate(); const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const calendarDiv = document.getElementById('calendar'); let calendarHTML = '';
        const daysOfWeek = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
        daysOfWeek.forEach(day => { calendarHTML += `<div class="calendar-day header">${day}</div>`; });
        for (let i = 0; i < firstDayOfMonth; i++) { calendarHTML += `<div class="calendar-day"></div>`; }
        for (let day = 1; day <= daysInMonth; day++) {
            const isCurrentDay = day === todayDate && now.getMonth() === new Date().getMonth() && now.getFullYear() === new Date().getFullYear();
            calendarHTML += `<div class="calendar-day ${isCurrentDay ? 'current-day' : ''}">${day}</div>`;
        }
        calendarDiv.innerHTML = calendarHTML;
        document.querySelector('#calendar-widget h4').innerHTML = `<i class="fas fa-calendar-alt"></i> ${monthNames[currentMonth]} ${currentYear}`;
    }
    renderCalendar();

    // Hamburger menu functionality
    const hamburger = document.getElementById('hamburger'); const mobileNav = document.getElementById('mobileNav');
    const navOverlay = document.getElementById('navOverlay'); const closeNav = document.getElementById('closeNav');
    const accountBtn = document.getElementById('accountBtn'); const accountPopup = document.getElementById('accountPopup');
    hamburger.addEventListener('click', () => { mobileNav.classList.add('open'); navOverlay.style.display = 'block'; document.body.style.overflow = 'hidden'; });
    function closeMobileMenu() { mobileNav.classList.remove('open'); navOverlay.style.display = 'none'; document.body.style.overflow = ''; }
    closeNav.addEventListener('click', closeMobileMenu); navOverlay.addEventListener('click', closeMobileMenu);
    accountBtn.addEventListener('click', (event) => { event.preventDefault(); event.stopPropagation(); accountPopup.style.display = accountPopup.style.display === 'block' ? 'none' : 'block'; });
    document.addEventListener('click', (event) => { if (accountPopup.style.display === 'block' && !accountPopup.contains(event.target) && event.target !== accountBtn && !accountBtn.contains(event.target)) { accountPopup.style.display = 'none'; } });

    // Simulate Weather Updates
    function updateWeather() {
        const temperature = (Math.random() * 10 + 25).toFixed(1); 
        const humidity = (Math.random() * 30 + 60).toFixed(0); 
        const windSpeed = (Math.random() * 15 + 5).toFixed(1); 
        const conditions = ["Partly Cloudy", "Sunny", "Cloudy", "Showers"];
        const currentCondition = conditions[Math.floor(Math.random() * conditions.length)];
        document.getElementById('weather-temp').textContent = temperature;
        document.getElementById('weather-humidity').textContent = humidity;
        document.getElementById('weather-wind').textContent = windSpeed;
        const weatherIconElement = document.getElementById('weather-icon');
        let iconClass = 'fas fa-question-circle'; 
        weatherIconElement.style.color = 'var(--text-dark)'; 

        if (currentCondition.includes("Cloudy") && !currentCondition.includes("Partly")) { iconClass = 'fas fa-cloud'; weatherIconElement.style.color = 'var(--text-light)'; }
        else if (currentCondition.includes("Rain") || currentCondition.includes("Showers")) { iconClass = 'fas fa-cloud-showers-heavy'; weatherIconElement.style.color = 'var(--secondary-blue)';}
        else if (currentCondition.includes("Sunny")) { iconClass = 'fas fa-sun'; weatherIconElement.style.color = 'var(--accent-color)'; }
        else if (currentCondition.includes("Partly Cloudy")) { iconClass = 'fas fa-cloud-sun'; weatherIconElement.style.color = 'var(--accent-color)';}
        weatherIconElement.innerHTML = `<i class="${iconClass}"></i> ${currentCondition}`;
    }
    updateWeather(); setInterval(updateWeather, 600000);

    // Real-Time Education News Feed
    function fetchEducationNews() {
        const newsFeedContainer = document.getElementById("live-news-feed");
        newsFeedContainer.innerHTML = '<p class="news-loading-text"><i class="fas fa-spinner fa-spin"></i> Fetching latest education news...</p>';

        const simulatedNewsData = {
            articles: [
                { title: "DepEd Launches New Nationwide Reading Program", source: { name: "DepEd Press Center" }, url: "https://www.deped.gov.ph/category/news-and-updates/press-releases/", publishedAt: new Date(Date.now() - Math.random() * 100000000).toISOString(), description: "The Department of Education today unveiled a comprehensive new reading program aimed at improving literacy rates among elementary students across all regions.", image: "https://placehold.co/150x110/00308F/FFFFFF?text=Education1&font=montserrat" },
                { title: "Guidelines for SY 2025-2026 Enrollment Released", source: { name: "Official Gazette PH" }, url: "https://www.officialgazette.gov.ph/", publishedAt: new Date(Date.now() - Math.random() * 200000000).toISOString(), description: "Key dates and procedures for the upcoming school year's enrollment period have been officially announced by the department.", image: "https://placehold.co/150x110/FFDA63/000000?text=Enrollment&font=montserrat" },
                { title: "Teachers to Undergo New Upskilling Workshops on Digital Tools", source: { name: "TechNews Philippines" }, url: "#", publishedAt: new Date(Date.now() - Math.random() * 300000000).toISOString(), description: "A series of workshops will equip educators with the latest digital teaching methodologies and classroom technologies.", image: "https://placehold.co/150x110/4361EE/FFFFFF?text=TechEd&font=montserrat" },
                { title: "VP Duterte Emphasizes Importance of Early Childhood Education", source: { name: "Philippine Star" }, url: "https://www.philstar.com/headlines", publishedAt: new Date(Date.now() - Math.random() * 400000000).toISOString(), description: "The Vice President and Education Secretary highlighted the critical role of foundational learning in national development during the recent summit.", image: "https://placehold.co/150x110/28a745/FFFFFF?text=ECE&font=montserrat" },
                { title: "Record Number of Participants in National Science and Math Fair", source: { name: "Manila Times" }, url: "https://www.manilatimes.net/news", publishedAt: new Date(Date.now() - Math.random() * 500000000).toISOString(), description: "This year's National Science and Math Fair saw an unprecedented number of entries from young innovators nationwide, showcasing their talents.", image: "https://placehold.co/150x110/FFA000/000000?text=SciFair&font=montserrat" }
            ].sort((a,b) => new Date(b.publishedAt) - new Date(a.publishedAt)) 
        };
        
        setTimeout(() => { 
            if (simulatedNewsData && simulatedNewsData.articles && simulatedNewsData.articles.length > 0) {
                newsFeedContainer.innerHTML = ""; 
                simulatedNewsData.articles.forEach(article => { 
                    const newsItemDiv = document.createElement("div");
                    newsItemDiv.classList.add("news-item-live");
                    
                    const imageElement = document.createElement("img");
                    imageElement.src = article.image || "https://placehold.co/150x110/e0e0e0/777777?text=No+Image&font=montserrat"; 
                    imageElement.alt = article.title.substring(0, 30) + "..."; 
                    imageElement.classList.add("news-image-placeholder");
                    imageElement.onerror = function() { this.src='https://placehold.co/150x110/e0e0e0/777777?text=Error&font=montserrat'; };

                    const contentDiv = document.createElement("div");
                    contentDiv.classList.add("news-content-live");

                    const titleElement = document.createElement("h5");
                    titleElement.classList.add("news-title-live");
                    const titleLink = document.createElement("a");
                    titleLink.href = article.url; // This makes the title clickable
                    titleLink.textContent = article.title;
                    titleLink.target = "_blank"; // Opens link in a new tab
                    titleElement.appendChild(titleLink);
                    
                    const sourceElement = document.createElement("span");
                    sourceElement.classList.add("news-source-live");
                    const publishedDate = new Date(article.publishedAt);
                    sourceElement.innerHTML = `<i class="fas fa-newspaper"></i> ${article.source.name} <span style="margin: 0 5px;">|</span> <i class="fas fa-calendar-alt"></i> ${publishedDate.toLocaleDateString()} ${publishedDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
                    
                    contentDiv.appendChild(titleElement);
                    contentDiv.appendChild(sourceElement);

                    if (article.description) {
                        const descriptionElement = document.createElement("p");
                        descriptionElement.classList.add("news-description-live");
                        descriptionElement.textContent = article.description.substring(0, 120) + (article.description.length > 120 ? "..." : "");
                        contentDiv.appendChild(descriptionElement);
                    }
                    
                    newsItemDiv.appendChild(imageElement);
                    newsItemDiv.appendChild(contentDiv);
                    newsFeedContainer.appendChild(newsItemDiv);
                });
            } else {
                newsFeedContainer.innerHTML = '<p class="news-error-text">Could not fetch education news at this time.</p>';
            }
        }, 1500); 
    }

    // Update welcome message and profile info on page load
    document.addEventListener('DOMContentLoaded', () => {
        const firstName = getLocalStorage('firstName') || 'User';
        const lastName = getLocalStorage('lastName') || '';
        const email = getLocalStorage('email') || 'Not Provided';
        const role = getLocalStorage('role') || 'Administrator';
        const department = getLocalStorage('department') || 'Data Management Unit';
        const status = getLocalStorage('status') || 'Active';
        const fullName = `${firstName} ${lastName}`.trim();

        const welcomeEl = document.getElementById('user-fullname'); if (welcomeEl) welcomeEl.textContent = fullName;
        const profileNameSpan = document.getElementById('profile-name'); if (profileNameSpan) profileNameSpan.textContent = fullName;
        const profileRoleSpan = document.getElementById('profile-role'); if (profileRoleSpan) profileRoleSpan.textContent = role;
        const profileEmailSpan = document.getElementById('profile-email'); if (profileEmailSpan) profileEmailSpan.textContent = email;
        const profileDepartmentSpan = document.getElementById('profile-department'); if (profileDepartmentSpan) profileDepartmentSpan.textContent = department;
        const profileStatusSpan = document.getElementById('profile-status'); if (profileStatusSpan) profileStatusSpan.textContent = status;
        
        fetchEducationNews(); 
        setInterval(fetchEducationNews, 300000); 
    });
</script>
</body>
</html>
